{% extends 'base.html' %}

{% block content %}
<div class="container mt-5">
  <h2>Felhasználók csoporttagsága</h2>
  <p class="text-muted">Itt állíthatod be, hogy ki melyik csoportba tartozzon.</p>

  <form method="post" class="mt-4">
    {% csrf_token %}

    <table class="table table-bordered table-striped">
      <thead>
        <tr>
          <th>Felhasználó</th>
          <th>Csoportok</th>
        </tr>
      </thead>
      <tbody>
        {% for user in users %}
          <tr>
            <td>{{ user.username }}</td>
            <td>
              <select name="groups_{{ user.id }}" multiple class="form-control" size="4">
                {% for group in groups %}
                  <option value="{{ group.id }}"
                    {% if group in user.groups.all %}selected{% endif %}>
                    {{ group.name }}
                  </option>
                {% endfor %}
              </select>
              <small class="form-text text-muted">Tartsd lenyomva a Ctrl-t több csoport kijelöléséhez vagy a kijelölés visszavonásához.</small>
            </td>
          </tr>
        {% endfor %}
      </tbody>
    </table>

    <button type="submit" class="btn btn-primary">Csoporttagságok mentése</button>
    <a href="{% url 'quiz:quiz_list' %}" class="btn btn-secondary">Vissza a kvízekhez</a>
  </form>
</div>
{% endblock %}
