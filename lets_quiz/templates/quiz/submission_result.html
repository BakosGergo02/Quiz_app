{% extends 'base.html' %}
{% block title %}Let's Quiz | Eredm√©ny{% endblock title %}
{% block content %}

<div class="container my-5">
  <div class="card shadow-lg border-0 rounded-3">
    <div class="card-body p-4">

      <!-- K√©rd√©s -->
      <h3 class="text-primary mb-4">
        {{ attempted_question.question.html|safe }}
      </h3>

      <!-- V√°laszaid -->
      <div class="mb-3">
        <h5 class="text-muted">A te v√°laszod:</h5>
        {% if attempted_question.selected_choices.all %}
          {% for choice in attempted_question.selected_choices.all %}
            <div class="alert alert-secondary py-2 mb-2">
              {{ choice.html|safe }}
            </div>
          {% endfor %}
        {% else %}
          <p class="text-warning">Nem v√°lasztott√°l semmit.</p>
        {% endif %}
      </div>

      <!-- Helyes v√°laszok -->
      <div class="mb-4">
        <h5 class="text-muted">Helyes v√°lasz(ok):</h5>
        {% for choice in attempted_question.question.choices.all %}
          {% if choice in attempted_question.selected_choices.all %}
            {% if choice.is_correct %}
              <div class="alert alert-success py-2 mb-2">
                ‚úÖ {{ choice.html|safe }} (helyes v√°laszt√°s)
              </div>
            {% else %}
              <div class="alert alert-danger py-2 mb-2">
                ‚ùå {{ choice.html|safe }} (hib√°s v√°laszt√°s)
              </div>
            {% endif %}
          {% elif choice.is_correct %}
            <div class="alert alert-info py-2 mb-2">
              üí° {{ choice.html|safe }} (helyes v√°lasz, amit nem jel√∂lt√©l)
            </div>
          {% endif %}
        {% endfor %}
      </div>

      <!-- Eredm√©ny -->
      {% if attempted_question.is_correct %}
        <div class="alert alert-success text-center fs-5">
          ‚úÖ Helyes v√°lasz! +{{ attempted_question.marks_obtained }} pont
        </div>
      {% else %}
        <div class="alert alert-danger text-center fs-5">
          ‚ùå Helytelen v√°lasz ‚Äî pontsz√°mod: {{ attempted_question.marks_obtained }}
        </div>
      {% endif %}

      <!-- K√∂vetkez≈ë k√©rd√©s gomb -->
      <div class="text-center mt-4">
        <a href="{% url 'quiz:play' %}" class="btn btn-lg btn-primary">
          K√∂vetkez≈ë k√©rd√©s ‚Üí
        </a>
      </div>

    </div>
  </div>
</div>

{% endblock content %}
